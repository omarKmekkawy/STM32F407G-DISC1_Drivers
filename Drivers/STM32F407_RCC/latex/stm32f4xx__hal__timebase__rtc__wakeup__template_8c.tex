\doxysection{system/src/stm32f4-\/hal/stm32f4xx\+\_\+hal\+\_\+timebase\+\_\+rtc\+\_\+wakeup\+\_\+template.c File Reference}
\label{stm32f4xx__hal__timebase__rtc__wakeup__template_8c}\index{system/src/stm32f4-\/hal/stm32f4xx\_hal\_timebase\_rtc\_wakeup\_template.c@{system/src/stm32f4-\/hal/stm32f4xx\_hal\_timebase\_rtc\_wakeup\_template.c}}


HAL time base based on the hardware RTC\+\_\+\+WAKEUP Template.  


{\ttfamily \#include \char`\"{}stm32f4xx\+\_\+hal.\+h\char`\"{}}\newline
Include dependency graph for stm32f4xx\+\_\+hal\+\_\+timebase\+\_\+rtc\+\_\+wakeup\+\_\+template.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{stm32f4xx__hal__timebase__rtc__wakeup__template_8c__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \textbf{ RTC\+\_\+\+CLOCK\+\_\+\+SOURCE\+\_\+\+HSE}
\item 
\#define \textbf{ RTC\+\_\+\+ASYNCH\+\_\+\+PREDIV}~99U
\item 
\#define \textbf{ RTC\+\_\+\+SYNCH\+\_\+\+PREDIV}~9U
\item 
\#define \textbf{ RCC\+\_\+\+RTCCLKSOURCE\+\_\+1\+MHZ}~((uint32\+\_\+t)((uint32\+\_\+t)\textbf{ RCC\+\_\+\+BDCR\+\_\+\+RTCSEL} $\vert$ (uint32\+\_\+t)((\textbf{ HSE\+\_\+\+VALUE}/1000000U) $<$$<$ 16U)))
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \textbf{ RTC\+\_\+\+WKUP\+\_\+\+IRQHandler} (void)
\begin{DoxyCompactList}\small\item\em This function handles WAKE UP TIMER interrupt request. \end{DoxyCompactList}\item 
\textbf{ HAL\+\_\+\+Status\+Type\+Def} \textbf{ HAL\+\_\+\+Init\+Tick} (uint32\+\_\+t Tick\+Priority)
\begin{DoxyCompactList}\small\item\em This function configures the RTC\+\_\+\+WKUP as a time base source. The time source is configured to have 1ms time base with a dedicated Tick interrupt priority. Wakeup Time base = ((RTC\+\_\+\+ASYNCH\+\_\+\+PREDIV + 1) $\ast$ (RTC\+\_\+\+SYNCH\+\_\+\+PREDIV + 1)) / RTC\+\_\+\+CLOCK = 1ms Wakeup Time = Wakeup\+Timebase $\ast$ Wake\+Up\+Counter (0 + 1) = 1 ms. \end{DoxyCompactList}\item 
void \textbf{ HAL\+\_\+\+Suspend\+Tick} (void)
\begin{DoxyCompactList}\small\item\em Suspend Tick increment. \end{DoxyCompactList}\item 
void \textbf{ HAL\+\_\+\+Resume\+Tick} (void)
\begin{DoxyCompactList}\small\item\em Resume Tick increment. \end{DoxyCompactList}\item 
void \textbf{ HAL\+\_\+\+RTCEx\+\_\+\+Wake\+Up\+Timer\+Event\+Callback} (\textbf{ RTC\+\_\+\+Handle\+Type\+Def} $\ast$hrtc)
\begin{DoxyCompactList}\small\item\em Wake Up Timer Event Callback in non blocking mode. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\textbf{ RTC\+\_\+\+Handle\+Type\+Def} \textbf{ h\+RTC\+\_\+\+Handle}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
HAL time base based on the hardware RTC\+\_\+\+WAKEUP Template. 

\begin{DoxyAuthor}{Author}
MCD Application Team 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
V1.\+5.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
06-\/May-\/2016 \begin{DoxyVerb}     This file overrides the native HAL time base functions (defined as weak)
     to use the RTC WAKEUP for the time base generation:
      + Intializes the RTC peripheral and configures the wakeup timer to be
        incremented each 1ms
      + The wakeup feature is configured to assert an interrupt each 1ms 
      + HAL_IncTick is called inside the HAL_RTCEx_WakeUpTimerEventCallback
      + HSE (default), LSE or LSI can be selected as RTC clock source
\end{DoxyVerb}
 \begin{DoxyVerb} ==============================================================================
                       ##### How to use this driver #####
 ==============================================================================
   [..]
   This file must be copied to the application folder and modified as follows:
   (#) Rename it to 'stm32f4xx_hal_timebase_rtc_wakeup.c'
   (#) Add this file and the RTC HAL drivers to your project and uncomment
      HAL_RTC_MODULE_ENABLED define in stm32f4xx_hal_conf.h 

   [..]
   (@) HAL RTC alarm and HAL RTC wakeup drivers can’t be used with low power modes:
       The wake up capability of the RTC may be intrusive in case of prior low power mode
       configuration requiring different wake up sources.
       Application/Example behavior is no more guaranteed 
   (@) The stm32f4xx_hal_timebase_tim use is recommended for the Applications/Examples
         requiring low power modes\end{DoxyVerb}

\end{DoxyDate}
\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\doxysubsubsection*{\begin{center}\copyright{} COPYRIGHT(c) 2016 STMicroelectronics\end{center} }

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\+:
\begin{DoxyEnumerate}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\item Neither the name of STMicroelectronics nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
\end{DoxyEnumerate}

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \char`\"{}\+AS IS\char`\"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 