\doxysection{system/src/stm32f4-\/hal/stm32f4xx\+\_\+hal\+\_\+spdifrx.c File Reference}
\label{stm32f4xx__hal__spdifrx_8c}\index{system/src/stm32f4-\/hal/stm32f4xx\_hal\_spdifrx.c@{system/src/stm32f4-\/hal/stm32f4xx\_hal\_spdifrx.c}}


This file provides firmware functions to manage the following functionalities of the SPDIFRX audio interface\+:  


{\ttfamily \#include \char`\"{}stm32f4xx\+\_\+hal.\+h\char`\"{}}\newline
Include dependency graph for stm32f4xx\+\_\+hal\+\_\+spdifrx.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{stm32f4xx__hal__spdifrx_8c__incl}
\end{center}
\end{figure}


\doxysubsection{Detailed Description}
This file provides firmware functions to manage the following functionalities of the SPDIFRX audio interface\+: 

\begin{DoxyAuthor}{Author}
MCD Application Team 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
V1.\+5.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
06-\/May-\/2016
\begin{DoxyItemize}
\item Initialization and Configuration
\item Data transfers functions
\item DMA transfers management
\item Interrupts and flags management \begin{DoxyVerb}===============================================================================
                     ##### How to use this driver #####
===============================================================================
[..]
   The SPDIFRX HAL driver can be used as follow:

   (#) Declare SPDIFRX_HandleTypeDef handle structure.
   (#) Initialize the SPDIFRX low level resources by implement the HAL_SPDIFRX_MspInit() API:
       (##) Enable the SPDIFRX interface clock.
       (##) SPDIFRX pins configuration:
           (+++) Enable the clock for the SPDIFRX GPIOs.
           (+++) Configure these SPDIFRX pins as alternate function pull-up.
       (##) NVIC configuration if you need to use interrupt process (HAL_SPDIFRX_ReceiveControlFlow_IT() and HAL_SPDIFRX_ReceiveDataFlow_IT() API's).
           (+++) Configure the SPDIFRX interrupt priority.
           (+++) Enable the NVIC SPDIFRX IRQ handle.
       (##) DMA Configuration if you need to use DMA process (HAL_SPDIFRX_ReceiveDataFlow_DMA() and HAL_SPDIFRX_ReceiveControlFlow_DMA() API's).
           (+++) Declare a DMA handle structure for the reception of the Data Flow channel.
           (+++) Declare a DMA handle structure for the reception of the Control Flow channel.
           (+++) Enable the DMAx interface clock.
           (+++) Configure the declared DMA handle structure CtrlRx/DataRx with the required parameters.
           (+++) Configure the DMA Channel.
           (+++) Associate the initialized DMA handle to the SPDIFRX DMA CtrlRx/DataRx handle.
           (+++) Configure the priority and enable the NVIC for the transfer complete interrupt on the 
                 DMA CtrlRx/DataRx channel.

  (#) Program the input selection, re-tries number, wait for activity, channel status selection, data format, stereo mode and masking of user bits
      using HAL_SPDIFRX_Init() function.

  -@- The specific SPDIFRX interrupts (RXNE/CSRNE and Error Interrupts) will be managed using the macros
      __SPDIFRX_ENABLE_IT() and __SPDIFRX_DISABLE_IT() inside the receive process.
  -@- Make sure that ck_spdif clock is configured.

  (#) Three operation modes are available within this driver :

  *** Polling mode for reception operation (for debug purpose) ***
  ================================================================
  [..]
    (+) Receive data flow in blocking mode using HAL_SPDIFRX_ReceiveDataFlow()
        (+) Receive control flow of data in blocking mode using HAL_SPDIFRX_ReceiveControlFlow()

  *** Interrupt mode for reception operation ***
  =========================================
  [..]    
    (+) Receive an amount of data (Data Flow) in non blocking mode using HAL_SPDIFRX_ReceiveDataFlow_IT() 
    (+) Receive an amount of data (Control Flow) in non blocking mode using HAL_SPDIFRX_ReceiveControlFlow_IT() 
    (+) At reception end of half transfer HAL_SPDIFRX_RxHalfCpltCallback is executed and user can 
        add his own code by customization of function pointer HAL_SPDIFRX_RxHalfCpltCallback 
    (+) At reception end of transfer HAL_SPDIFRX_RxCpltCallback is executed and user can
        add his own code by customization of function pointer HAL_SPDIFRX_RxCpltCallback
    (+) In case of transfer Error, HAL_SPDIFRX_ErrorCallback() function is executed and user can
        add his own code by customization of function pointer HAL_SPDIFRX_ErrorCallback

  *** DMA mode for reception operation ***
  ========================================
  [..]
    (+) Receive an amount of data (Data Flow) in non blocking mode (DMA) using HAL_SPDIFRX_ReceiveDataFlow_DMA() 
    (+) Receive an amount of data (Control Flow) in non blocking mode (DMA) using HAL_SPDIFRX_ReceiveControlFlow_DMA()
    (+) At reception end of half transfer HAL_SPDIFRX_RxHalfCpltCallback is executed and user can
        add his own code by customization of function pointer HAL_SPDIFRX_RxHalfCpltCallback
    (+) At reception end of transfer HAL_SPDIFRX_RxCpltCallback is executed and user can
        add his own code by customization of function pointer HAL_SPDIFRX_RxCpltCallback
    (+) In case of transfer Error, HAL_SPDIFRX_ErrorCallback() function is executed and user can
        add his own code by customization of function pointer HAL_SPDIFRX_ErrorCallback
    (+) Stop the DMA Transfer using HAL_SPDIFRX_DMAStop()

  *** SPDIFRX HAL driver macros list ***
  =============================================
  [..]
    Below the list of most used macros in SPDIFRX HAL driver.
     (+) __HAL_SPDIFRX_IDLE: Disable the specified SPDIFRX peripheral (IDEL State)
     (+) __HAL_SPDIFRX_SYNC: Enable the synchronization state of the specified SPDIFRX peripheral (SYNC State)
     (+) __HAL_SPDIFRX_RCV: Enable the receive state of the specified SPDIFRX peripheral (RCV State)
     (+) __HAL_SPDIFRX_ENABLE_IT : Enable the specified SPDIFRX interrupts
     (+) __HAL_SPDIFRX_DISABLE_IT : Disable the specified SPDIFRX interrupts
     (+) __HAL_SPDIFRX_GET_FLAG: Check whether the specified SPDIFRX flag is set or not.

  [..]
     (@) You can refer to the SPDIFRX HAL driver header file for more useful macros\end{DoxyVerb}

\end{DoxyItemize}
\end{DoxyDate}
\begin{DoxyAttention}{Attention}

\end{DoxyAttention}
\doxysubsubsection*{\begin{center}\copyright{} COPYRIGHT(c) 2016 STMicroelectronics\end{center} }

Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met\+:
\begin{DoxyEnumerate}
\item Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
\item Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
\item Neither the name of STMicroelectronics nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.
\end{DoxyEnumerate}

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \char`\"{}\+AS IS\char`\"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. 